(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(16),r=n.n(c),a=n(7),u=n(3),i=n(2),o=n(0),s=function(e){return Object(o.jsx)("div",{children:Object(o.jsxs)("span",{children:["Find an existing contact:"," ",Object(o.jsx)("input",{onChange:e.onChange,value:e.value})]})})},j=function(e){return Object(o.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(o.jsxs)("div",{children:["Name:",Object(o.jsx)("input",{onChange:e.nameChange,value:e.nameValue})]}),Object(o.jsxs)("div",{children:["Phone:",Object(o.jsx)("input",{onChange:e.numberChange,value:e.numberValue})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"Add"})})]})},d=function(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("span",{children:[e.name," ",e.number]})," ",Object(o.jsx)("button",{onClick:e.goDelete,children:"Delete"})]})},l=function(e){return e.list.map((function(t){return Object(o.jsx)(d,{name:t.name,number:t.number,goDelete:function(){return e.goDelete(t.id)}},t.name)}))},b=n(4),m=n.n(b),h="/api/persons",f={getAll:function(){return m.a.get(h)},create:function(e){return m.a.post(h,e)},update:function(e,t){return m.a.put("".concat(h,"/").concat(e),t)},goDelete:function(e){return m.a.delete("".concat(h,"/").concat(e))}},p=(n(41),function(e){return""===e.msg?Object(o.jsx)("div",{className:"empty"}):Object(o.jsx)("div",{className:"empty",children:"success"===e.type?Object(o.jsx)("div",{className:"notification success",children:e.msg}):Object(o.jsx)("div",{className:"notification error",children:e.msg})})}),O=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(""),d=Object(u.a)(r,2),b=d[0],m=d[1],h=Object(i.useState)(""),O=Object(u.a)(h,2),g=O[0],x=O[1],v=Object(i.useState)(""),y=Object(u.a)(v,2),C=y[0],w=y[1],D=Object(i.useState)({msg:"",type:""}),k=Object(u.a)(D,2),S=k[0],N=k[1],A=[];0!==n.length&&0!==C.length?A=n.filter((function(e){return e.name.slice(0,C.length).toUpperCase()===C.toUpperCase()})):0===C.length&&(A=n),Object(i.useEffect)((function(){f.getAll().then((function(e){c(e.data)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)(p,{type:S.type,msg:S.msg}),Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(s,{onChange:function(e){return w(e.target.value)},value:C}),Object(o.jsx)("h2",{children:"Add new contact"}),Object(o.jsx)(j,{onSubmit:function(e){var t=n.find((function(e){return e.name.toUpperCase()===b.toUpperCase()}));if(e.preventDefault(),t){if(window.confirm("".concat(b)+" is already added to the phonebook, replace the old number with a new one?")){var r=Object(a.a)(Object(a.a)({},t),{},{number:g});f.update(t.id,r).then((function(e){return c(n.map((function(n){return t.id!==n.id?n:e.data})))})).catch((function(){c(n.filter((function(e){return t.id!==e.id}))),N({msg:"".concat(t.name,"'s records were already deleted from the server"),type:"error"}),setTimeout((function(){return N({msg:"",type:""})}),3e3)}))}}else{var u={name:b,number:g};f.create(u).then((function(e){c(n.concat(e.data)),m(""),x(""),N({msg:"Added ".concat(e.data.name," to the Phonebook"),type:"success"}),setTimeout((function(){return N({msg:"",type:""})}),3e3)}))}},nameChange:function(e){return m(e.target.value)},numberChange:function(e){return x(e.target.value)},nameValue:b,numberValue:g}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(l,{list:A,goDelete:function(e){var t=n.find((function(t){return t.id===e})).name;window.confirm("Delete ".concat(t,"?"))&&f.goDelete(e).then((function(){return c(n.filter((function(t){return e!==t.id})))}))}})]})};r.a.render(Object(o.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e456a992.chunk.js.map