(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(16),r=n.n(c),a=n(7),o=n(3),s=n(2),u=n(0),i=function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)("span",{children:["Find an existing contact:"," ",Object(u.jsx)("input",{onChange:e.onChange,value:e.value})]})})},d=function(e){return Object(u.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(u.jsxs)("div",{children:["Name:",Object(u.jsx)("input",{onChange:e.nameChange,value:e.nameValue})]}),Object(u.jsxs)("div",{children:["Phone:",Object(u.jsx)("input",{onChange:e.numberChange,value:e.numberValue})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add"})})]})},l=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{children:[e.name," ",e.number]})," ",Object(u.jsx)("button",{onClick:e.goDelete,children:"Delete"})]})},j=function(e){return e.list.map((function(t){return Object(u.jsx)(l,{name:t.name,number:t.number,goDelete:function(){return e.goDelete(t.id)}},t.name)}))},b=n(4),m=n.n(b),h="/api/persons",f={getAll:function(){return m.a.get(h)},create:function(e){return m.a.post(h,e)},update:function(e,t){return m.a.put("".concat(h,"/").concat(e),t)},goDelete:function(e){return m.a.delete("".concat(h,"/").concat(e))}},p=(n(41),function(e){return""===e.msg?Object(u.jsx)("div",{className:"empty"}):Object(u.jsx)("div",{className:"empty",children:"success"===e.type?Object(u.jsx)("div",{className:"notification success",children:e.msg}):Object(u.jsx)("div",{className:"notification error",children:e.msg})})}),g=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(""),l=Object(o.a)(r,2),b=l[0],m=l[1],h=Object(s.useState)(""),g=Object(o.a)(h,2),O=g[0],x=g[1],v=Object(s.useState)(""),y=Object(o.a)(v,2),C=y[0],w=y[1],D=Object(s.useState)({msg:"",type:""}),k=Object(o.a)(D,2),S=k[0],N=k[1],A=[];0!==n.length&&0!==C.length?A=n.filter((function(e){return e.name.slice(0,C.length).toUpperCase()===C.toUpperCase()})):0===C.length&&(A=n),Object(s.useEffect)((function(){f.getAll().then((function(e){c(e.data)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)(p,{type:S.type,msg:S.msg}),Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(i,{onChange:function(e){return w(e.target.value)},value:C}),Object(u.jsx)("h2",{children:"Add new contact"}),Object(u.jsx)(d,{onSubmit:function(e){var t=n.find((function(e){return e.name.toUpperCase()===b.toUpperCase()}));if(e.preventDefault(),t){if(window.confirm("".concat(b)+" is already added to the phonebook, replace the old number with a new one?")){var r=Object(a.a)(Object(a.a)({},t),{},{number:O});f.update(t.id,r).then((function(e){c(n.map((function(n){return t.id!==n.id?n:e.data})))})).catch((function(e){console.log("message: ",e.message),404===e.response.status?(c(n.filter((function(e){return t.id!==e.id}))),N({msg:"".concat(t.name,"'s records were already deleted from the server"),type:"error"}),setTimeout((function(){return N({msg:"",type:""})}),5e3)):400===e.response.status&&(N({msg:e.response.data.error,type:"error"}),setTimeout((function(){return N({msg:"",type:""})}),5e3))}))}}else{var o={name:b,number:O};f.create(o).then((function(e){c(n.concat(e.data)),m(""),x(""),N({msg:"Added ".concat(e.data.name," to the Phonebook"),type:"success"}),setTimeout((function(){return N({msg:"",type:""})}),5e3)})).catch((function(e){console.log(e.response.data),N({msg:e.response.data.error,type:"error"}),setTimeout((function(){return N({msg:"",type:""})}),5e3)}))}},nameChange:function(e){return m(e.target.value)},numberChange:function(e){return x(e.target.value)},nameValue:b,numberValue:O}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(j,{list:A,goDelete:function(e){var t=n.find((function(t){return t.id===e})).name;window.confirm("Delete ".concat(t,"?"))&&f.goDelete(e).then((function(){return c(n.filter((function(t){return e!==t.id})))}))}})]})};r.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.385d88b5.chunk.js.map